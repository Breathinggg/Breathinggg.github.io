
<!DOCTYPE html>
<html>
<head>
    <title>高田馬場 グルメマップ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        #map {
            width: 100%;
            height: 100vh;
        }
    </style>
    <!-- 引入 Leaflet.js -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css">
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
</head>
<body>
    <div id="map"></div>
    <script>
        // 初始化地图，高田馬場を中心に設定
        const map = L.map('map').setView([35.7128, 139.7036], 15);

        // 添加 OpenStreetMap 瓦片图层
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
        }).addTo(map);

        // 定义高田馬場范围（矩形框）
        const bounds = [
            [35.7120, 139.7000],
            [35.7150, 139.7080]
        ];
        L.rectangle(bounds, {
            color: "blue",
            weight: 2,
            fill: true,
            fillOpacity: 0.2
        }).addTo(map).bindTooltip("Takadanobaba Area");

        // 定义当前位置图标
        const currentLocationIcon = L.icon({
            iconUrl: "https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png", // 红色图标
            iconSize: [25, 41],
            iconAnchor: [12, 41],
            popupAnchor: [1, -34],
            shadowUrl: "https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",
            shadowSize: [41, 41]
        });

        // 定义店铺数据
        const shops = [
            {
                name: "座・麻婆唐府",
                position: [35.7132955, 139.7023077],
                description: `
                    <strong>位置:</strong> 高田馬場, 4 Chome-11-10<br>
                    <strong>特徴:</strong> いろいろな食べ物があり、本場の四川料理を食べることができる。<br>
                    辛いものが苦手な方でも楽しめる料理が豊富。<br>
                    <strong>オススメ:</strong><br>
                    ピーマンと豚足の炒め 1200円ぐらい<br>
                    唐辛子と牛肉の炒め 1200円ぐらい<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipPEKOSB6Rm2MySRKLGw81AgllwfNkCSX7BrBgl2=w408-h544-k-no" alt="座・麻婆唐府" width="250">
                `
            },
            {
                name: "Arum Korean Restaurant",
                position: [35.714685866685116, 139.70279320486736],
                description: `
                    <strong>位置:</strong> 高田馬場, 3 Chome-4-17<br>
                    <strong>特徴:</strong> 量が多くて、牛丼セットの海鮮湯はめっちゃ美味しい。<br>
                    <strong>オススメ:</strong><br>
                    牛丼セット (セット1200-2000円)<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipNXei2gU-8I_pjdOp4mzdNE9kfkea8oHJHkaA0K=w408-h408-k-no" alt="Arum Korean Restaurant" width="250">
                `
            },
            {
                name: "Banh Mi Ngon Ngon",
                position: [35.71270401740903, 139.70044634412048],
                description: `
                    <strong>位置:</strong> 高田馬場, 4 Chome−17−15 秦ビル １F<br>
                    <strong>特徴:</strong> スタンダードなフォーです。<br>
                    <strong>オススメ:</strong><br>
                    フォー (1100円ぐらい)<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipPkUG2TML94MKp-EuVav8_-h09j1E2JTkTUpL2a=w425-h240-k-no" alt="Banh Mi Ngon Ngon" width="250">
                `
            },
            {
                name: "Takadanobaba Menya Musashi Takatora",
                position: [35.7141023571538, 139.70446882205462],
                description: `
                    <strong>位置:</strong> 高田馬場, 2 Chome-19-7<br>
                    <strong>特徴:</strong> スパイシーで量が多い。<br>
                    <strong>オススメ:</strong><br>
                    辛いラーメン/つけ麺 (1150円+)<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipM8RDf-f19YbN1J5JUQP_BAhve8ybhgulJDEClN=w408-h272-k-no" alt="Takadanobaba Menya Musashi Takatora" width="250">
                `
            },
            {
                name: "四川火鍋しゃぶしゃぶ専門店 賢合庄",
                position: [35.7136266, 139.7035030],
                description: `
                    <strong>位置:</strong> 新宿区　高田馬場　4−8−7 三階<br>
                    <strong>特徴:</strong> 火鍋を囲んで友人と楽しむことができる。辛いスープも選択可能。<br>
                    <strong>オススメ:</strong><br>
                    食べ放題: 4600円ぐらい<br>
                    飲み放題: 1500円ぐらい<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipNk2B4dkYA05hBzt5g0KxJ3ZgmbRu6-cHmoYgU4=w480-h240-k-no" alt="四川火鍋しゃぶしゃぶ専門店 賢合庄" width="250">
                `
            },
            {
                name: "ミャ ミィン モ",
                position: [35.713937, 139.704460],
                description: `
                    <strong>位置:</strong> 高田馬場, 2 Chome−19−7 TAK11 2F<br>
                    <strong>特徴:</strong> ミャンマー料理に興味がある方にはおすすめ。スパイスの辛さと狭いスペースには注意。<br>
                    <strong>オススメ:</strong><br>
                    うずらの唐揚げ、辛い豚の耳炒め、野菜炒め、ラペットゥ<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipM2QdVaed7oEMZ6xB8mXSw461F0YoBluLW308g=w408-h306-k-no" alt="ミャ ミィン モ" width="250">
                `
            },
            {
                name: "ミンガラバー",
                position: [35.714000, 139.705014],
                description: `
                    <strong>位置:</strong> 高田馬場, 2 Chome−18−6 柳屋ビル B1F<br>
                    <strong>特徴:</strong> ミャンマー料理の中でも特に注目すべき店。料理はいつもとても美味しい。<br>
                    <strong>オススメ:</strong> モヒンガ (1000円)<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipMEraLIbIbKisoazALTf4XtrDEUGiRgG1PxGnRE=w408-h306-k-no" alt="ミンガラバー" width="250">
                `
            },
            {
                name: "はま寿司",
                position: [35.7122838, 139.7075319],
                description: `
                    <strong>位置:</strong> 高田馬場, ２丁目13 プライム<br>
                    <strong>特徴:</strong> 手頃な価格と多様なメニュー。<br>
                    <strong>オススメ:</strong> 安い寿司 (価格: 1000-2000円)<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipP8VW24vKMOFU9qy3vftHkz3IUEP7YGhiUoO81l=w408-h305-k-no" alt="はま寿司" width="250">
                `
            },
            {
                name: "とんかつ とん久",
                position: [35.7127504027299, 139.70516305433884],
                description: `
                    <strong>位置:</strong> 高田馬場, Fiビル B1, 1 Chome-26-5<br>
                    <strong>特徴:</strong> 肉が柔らかく、量が多い。質の高いとんかつ。<br>
                    <strong>オススメ:</strong><br>
                    ヒレかつ 1250円<br>
                    ロースかつ 1300円<br>
                    <img src="https://lh5.googleusercontent.com/p/AF1QipPYzQbwbUZRnJVyK_lGQ0y1tkoIVRAaaToFw2Y=w408-h306-k-no" alt="とんかつ とん久" width="250">
                `
            }
        ];


        // 在地图上添加店铺标记
        shops.forEach((shop) => {
            const popupContent = `
                <div style="text-align: left;">
                    <h4>${shop.name}</h4>
                    <p>${shop.description}</p>
                </div>
            `;
            L.marker(shop.position).addTo(map)
                .bindPopup(popupContent)
        });

        // 实现实时定位功能
        function locateMe() {
            if (!navigator.geolocation) {
                alert("Geolocation is not supported by your browser.");
                return;
            }

            navigator.geolocation.getCurrentPosition(
                (position) => {
                    const { latitude, longitude } = position.coords;

                    // 在当前位置添加标记
                    const userMarker = L.marker([latitude, longitude], { icon: currentLocationIcon }).addTo(map);
                    userMarker.bindPopup("You are here!").openPopup();

                    // 平移到当前位置
                    map.setView([latitude, longitude], 15);
                },
                () => {
                    alert("Unable to retrieve your location.");
                }
            );
        }

        // 页面加载后自动启动定位
        document.addEventListener("DOMContentLoaded", locateMe);
    </script>
</body>
</html>
